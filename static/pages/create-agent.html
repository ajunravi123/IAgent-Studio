<div class="page create-agent">
    <div class="page-header">
        <div class="header-left">
            <button class="btn-back" onclick="goBack()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1>Create Agent</h1>
        </div>
        <a href="#" class="agent-api-link" title="API support is coming soon">
            <i class="fas fa-code"></i> Agent API
        </a>
    </div>

    <div class="create-agent-content">
        <div class="main-form">
            <div class="form-group">
                <label>
                    Name
                    <i class="fas fa-info-circle" title="Give your agent a unique name"></i>
                </label>
                <input type="text" id="agentName" placeholder="Agent name" class="form-input" autocomplete="off">
            </div>

            <div class="form-group">
                <label>
                    Description
                    <i class="fas fa-info-circle" title="Describe what your agent does"></i>
                </label>
                <input type="text" id="agentDescription" placeholder="Agent description" class="form-input" autocomplete="off">
            </div>

            <div class="form-group">
                <label>
                    Agent Role <i class="fas fa-info-circle" title="Define the role and responsibilities of your agent"></i>
                </label>
                <textarea class="form-textarea" id="agentRole" placeholder="You are an expert customer support agent."></textarea>
            </div>

            <div class="form-group">
                <label>
                    Goal <i class="fas fa-info-circle" title="Define the primary goal and objective of your agent"></i>
                </label>
                <textarea class="form-textarea" id="agentGoal" placeholder="Help users with their product-related queries and provide accurate, helpful responses."></textarea>
            </div>

            <div class="form-group">
                <label>
                    Expected Output <i class="fas fa-info-circle" title="Define the expected format and structure of the agent's responses"></i>
                </label>
                <textarea class="form-textarea" id="expectedOutput" placeholder="Clear, concise responses with step-by-step instructions when needed. Include relevant product information and links when applicable."></textarea>
            </div>

            <div class="form-group">
                <label>
                    Agent Backstory
                    <i class="fas fa-info-circle" title="Provide background context for your agent"></i>
                </label>
                <textarea id="agentBackstory" class="form-textarea" placeholder="Enter your agent's backstory and context..."></textarea>
            </div>

            <div class="form-group">
                <label>
                    Agent Instructions
                    <i class="fas fa-info-circle" title="Provide detailed instructions"></i>
                </label>
                <div class="instructions-group">
                    <textarea id="agentInstructions" class="form-textarea"></textarea>
                    <button class="btn-expand">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>

            <div class="form-group">
                <label>
                    Sample User Input
                    <i class="fas fa-info-circle" title="Provide an example of a user query for this agent"></i>
                </label>
                <input type="text" id="sampleUserInput" class="form-input" placeholder="Enter a sample user query or instruction...">
            </div>

            <div class="form-group">
                <div class="switch-group">
                    <label class="switch">
                        <input type="checkbox" id="managerAgent">
                        <span class="slider"></span>
                    </label>
                    <span>Verbose</span>
                    <i class="fas fa-info-circle" title="Enable verbose mode for detailed output"></i>
                </div>
            </div>

            <div class="form-group">
                <label>
                    Tool Configuration
                    <i class="fas fa-info-circle" title="Select tools for your agent"></i>
                </label>
                <div class="tools-section">
                    <div class="tools-header">
                        <div class="search-bar">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" placeholder="Search tools..." onkeyup="searchTools(this.value)" class="form-input">
                        </div>
                        <button class="btn-secondary" onclick="loadPage('tools')">
                            <i class="fas fa-plus"></i> Create Tool
                        </button>
                    </div>
                    <div class="tools-grid" id="toolsGrid">
                        <!-- Tools will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="section-group">
                <h3 class="section-title">LLM Settings</h3>
                <div class="form-group">
                    <label>
                        LLM Provider
                        <i class="fas fa-info-circle" title="Select your LLM provider"></i>
                    </label>
                    <select id="llmProvider" class="form-select" autocomplete="off">
                        <option value="impact">Impact Analytics</option>
                        <option value="openai">OpenAI</option>
                        <option value="anthropic">Anthropic</option>
                        <option value="google">Google</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>
                        LLM Model
                        <i class="fas fa-info-circle" title="Select the model"></i>
                    </label>
                    <div class="model-select-group">
                        <select id="llmModel" class="form-select" autocomplete="off">
                            <option value="impact-storm-11">impact-storm-11</option>
                            <option value="gpt-4o-mini">gpt-4o-mini</option>
                            <option value="gpt-4">GPT-4</option>
                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                        </select>
                        <button class="btn-icon" title="Need help choosing?">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        API Key
                        <i class="fas fa-info-circle" title="Enter your LLM provider's API key"></i>
                    </label>
                    <input type="text" id="apiKey" placeholder="Enter API key" class="form-input" autocomplete="off">
                </div>
            </div>

            <div class="form-actions">
                <button class="btn-primary btn-create" onclick="saveAgent()" id="saveButton">
                    <i class="fas fa-robot"></i>
                    <span id="buttonText">Create Agent</span>
                </button>
            </div>
        </div>

        <div class="side-panel">
            <!-- <div class="search-features">
                <input type="text" placeholder="Search features..." class="form-input">
            </div> -->

            <div class="features-section">
                <h2>Additional Features</h2>
                <div class="feature-list">
                    <div class="feature-item">
                        <div class="feature-info">
                            <span>Enable Task Retry</span>
                            <i class="fas fa-info-circle" title="Agent edit History will be saved"></i>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="knowledgeBase">
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="feature-item">
                        <div class="feature-info">
                            <span>Save Task Logs</span>
                            <i class="fas fa-info-circle" title="Store task logs for future reference"></i>
                            <span class="beta-tag">Beta</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="dataQuery">
                            <span class="slider"></span>
                        </label>
                    </div>

                    <!-- Add other features similarly -->
                </div>
            </div>

            <div class="build-section">
                <div class="rocket-icon">
                    <i class="fas fa-rocket"></i>
                </div>
                <h2>Start Building</h2>
                <div class="build-steps">
                    <div class="build-step">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <h3>Choose LLM & Define Role</h3>
                            <p>Select your preferred large language model and define your agent's purpose</p>
                        </div>
                    </div>
                    <div class="build-step">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <h3>Add Tools (Optional)</h3>
                            <p>Enhance your agent with external tools and capabilities</p>
                        </div>
                    </div>
                    <div class="build-step">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <h3>Enable Features (Optional)</h3>
                            <p>Add advanced features to boost your agent's internal powers</p>
                        </div>
                    </div>
                </div>
                <button class="btn-primary" onclick="saveAgent()">Create</button>
            </div>
        </div>
    </div>
</div>

<!-- View Tool Modal -->
<div class="modal" id="viewToolModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>View Tool</h2>
            <button class="btn-close" onclick="closeViewTool()">×</button>
        </div>
        <div class="modal-body">
            <!-- Content will be dynamically populated -->
        </div>
    </div>
</div>

<!-- Tool Actions Menu -->
<div id="toolActionsMenu" class="agent-actions-menu">
    <div class="menu-item" onclick="editTool(selectedToolId)">
        <i class="fas fa-edit"></i>
        Edit
    </div>
    <div class="menu-item" onclick="cloneTool(selectedToolId)">
        <i class="fas fa-copy"></i>
        Clone
    </div>
    <div class="menu-item delete" onclick="deleteTool(selectedToolId)">
        <i class="fas fa-trash"></i>
        Delete
    </div>
</div> 